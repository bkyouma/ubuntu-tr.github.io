

  





<!DOCTYPE html>
<html>
    <head>
        <title>Syslog-ng</title>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="theme/ubuntu-tr/css/main.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/ubuntu-tr.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/semantic.min.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/github-markdown.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/highlight.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/flexslider.css">
<script src="theme/ubuntu-tr/js/jquery-2.2.0.min.js"></script>
<script src="theme/ubuntu-tr/js/ubuntu-tr.js"></script>
<script src="theme/ubuntu-tr/js/jquery.flexslider-min.js"></script>

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#dd4814">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#dd4814">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="icon" sizes="192x192" href="http://design.ubuntu.com/wp-content/uploads/ubuntu-logo32.png">

        <script src="theme/ubuntu-tr/js/relatedPosts.js"></script>
        <script src="theme/ubuntu-tr/js/jquery-ui.min.js"></script>
        <script src="theme/ubuntu-tr/js/tocify.js"></script>
        <link rel="stylesheet" href="theme/ubuntu-tr/css/tocify.css">
    </head>
    <body>
        <input type="checkbox" name="menuDugme" id="menuDugme1">
<header>
    <nav class="ustMenu">
        <a href="http://www.ubuntu-tr.net/">Anasayfa</a>
        <a href="https://forum.ubuntu-tr.net/">Forum</a>
        <a class="aktif" href="/">SUDO</a>
        <a href="http://wiki.ubuntu-tr.net/">Wiki</a>
        <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
        <a href="http://www.ubuntu-tr.net/iletisim/">İletişim</a>
        <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        <a href="http://www.ubuntu-tr.net/tur/14.04/tr/index.html">Ubuntu Çevrimiçi Tur</a>
        <a href="http://webchat.freenode.net/?channels=ubuntu-tr-sohbet">Sohbet Kanalı</a>
    </nav>
    <nav class="menu">
        <a class="logo" href="">
            <label for="menuDugme1">
               <img src="theme/ubuntu-tr/images/menu.png" class="menuIcon"/>
            </label>
            sudo
        </a>
        <a href="/">Ana Sayfa</a>
        
        
	<a href="/haberler/">Haberler</a>

	<a href="/uygulama-tanitimlari/">Tanıtım</a>

	<a href="/nasil-yapilir/">Nasıl?</a>

	<a href="/oyun-eglence/">Oyun / Eğlence</a>

	<a href="/ubuntu+1/">Ubuntu+1</a>


        <a></a>
    </nav>
</header>

        <div class="ui container">
        <br /><br />
            <div class="ui grid equal width stackable">
                <div class="column">
                    <div class="ui card fluid">
                        <div class="content">
                            <h1 class="ui header">Syslog-ng</h1>
                            <div class="meta">
                                <span><b class="ui sub header orange">Yazar:</b> Bahadır Demircioğlu</span>
                                <span><b class="ui sub header orange">Kategori:</b> <a href="/uygulama-tanitimlari/">Tanıtım</a></span>
                                <span class="right floated">19 Nisan 2016 tarihinde yayımlandı.</span>
                            </div>
                            <div class="description">
                                Çoğu son kullanıcı, kayıt (log) dosyalarını bilmez. Biraz ileri seviyede olanlar ise hatalarla karşılaşınca bunlara bakarlar. Ama sistem yöneticileri için sistemin neler yaptığını sürekli izlemek önemlidir. Bunun içinse bu kayıtları inceleyen araçları kullanırlar. Nasıl mı? Cevabı yazımızda.
                            </div>
                        </div>
                        <div class="image">
                            <img src="images/post/syslog-ng/log.png">
                        </div>
                        <div class="markdown-body">
                            <p>Günlük kayıtları(Log) çalışan sistemler için çok önemlidir. Eğer kişisel kullanıcıysanız bu kayıtlara
bakarak sisteminizdeki sorunları çözebilir, eğer sunucu sistemlerini yönetiyorsanız bu kayıtlara bakarak hem sorunlarınızı çözebilir hemde sisteminizde sizden habersiz olup biten olaylar var ise bunları görebilirsiniz.</p>

<p>Bu işi yapmak için Ubuntu sistemlerde varsayılan olarak rsylog gelmektedir. Ben ise kendi sistemlerimde Balabit firmasının geliştirmeye devam ettiği syslog-ng uygulamasının opensource versiyonunu kullanmaktayım.</p>

<p>Bu yazımın ilk kısmında depolarda var olan syslog-ng uygulamasını kuracağım. İkinci kısmında ise bu kayıtları daha kolay anlamamızı sağlayacak olan bir uygulama olan LogAnalyzer kurulumunu yapacağım. Eğer “Ben rsyslog’dan memnunum” derseniz direk olarak ikinci kısmı uygulayabilirsiniz. :)</p>

<p>Artık yazımızın ilk kısmına başlayabiliriz. Öncelikli olarak Ubuntu üzerinde varsayılan olarak gelen rsyslog’u sistemden kaldıracağım.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>apt-get remove rsyslog
</code></pre>
</div>

<p>Şimdi sisteme syslog-ng yi yükleyelim.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>apt-get install syslog-ng
</code></pre>
</div>

<p>Bu dakikadan sonra artık loglama işini syslog-ng devralmış olacak. Bunun doğruluğunu test etmek için /var/log/messages dosyasının son satırlarına bakarsanız, syslog-ng yazdığını göreceksiniz. Burada dikkat edilmesi gereken messages dosyasının izni. Şuan için root hakları ile dosyaya bakabilirsiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  Jul 17 15:25:55 syslog-ng kernel: [    0.000000] BIOS-e820: [mem 0x000000000009f000-0x000000000009ffff] reserved
  Jul 17 15:25:55 syslog-ng kernel: [    0.000000] BIOS-e820: [mem 0x00000000000ca000-0x00000000000cbfff] reserved
  Jul 17 15:25:55 syslog-ng kernel: [    0.000000] BIOS-e820: [mem 0x00000000000dc000-0x00000000000fffff] reserved
  Jul 17 15:25:55 syslog-ng kernel: [    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000001fedffff] usable
  Jul 17 15:25:55 syslog-ng kernel: [    0.000000] BIOS-e820: [mem 0x000000001fee0000-0x000000001fefefff] ACPI data
</code></pre>
</div>

<p>Birazcık syslog-ng uygulamasını karıştıralım. Yapılandırma dosyası /etc/syslog-ng/ dizininde bulunan syslog-ng.conf dosyasıdır. Bu dosya içinde önce “options” tanımlamalarında Varsayılan olarak gelen değerler şuan için bizim için yeterlidir. Eğer log dosyalarına erişimin kısıtlanmasını istersek perm() değerinde değişiklik yapmamız gerekecek. Biz bir web uygulaması ile bu logları okumaya çalışacağımız için izin için; perm(0604) kullanacağız.</p>

<p>Logların nereden toplanacağı ise “source” tanımlaması ile oluyor. Varsayılan olarak, aşağıda görüldüğü gibi, local makine logları toplanıyor. Burada s_src kaynağımıza verdiğim isim. Bu ismi dilediğiniz gibi verebilirsiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  source s_src {
    system();
    internal();
  };
</code></pre>
</div>

<p>İkinci kısımda ise toplanan logların nereye yazılacağını tanımlayacağız. Bunun için;</p>

<div class="highlighter-rouge"><pre class="highlight"><code>destination d_messages { file("/var/log/messages"); };
</code></pre>
</div>

<p>“d_messages kısmına” istediğinizi yazabilirsiniz. Burada ben loglarımın, /var/log/messages dosyasına yazılmasını istiyorum. Eğer bir de merkezi log sunucumuz varsa ve bütün logları merkezi sunucuda da toplayacaksak yeni bir destination daha tanımlamamız gerekecek. Bunun için;</p>

<div class="highlighter-rouge"><pre class="highlight"><code>destination d_logserver { tcp("x.x.x.x"); }
</code></pre>
</div>

<p>TCP portunu kullanarak x.x.x.x IP’li merkezi log sunucunuza log verileri gönderilecek demektir.</p>

<p>Son kısımda ise artık loglama işleminin nasıl yapılacağını tanımlıyoruz. Aşağıda makinemizdeki logların herhangi bir ayrıştırma işlemi yapılmadan olduğu gibi messages dosyasına yazılacağını göstermektedir.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	log {
	  source(s_local);
	  destination(d_messages);
	};
</code></pre>
</div>

<p>Basit olarak yapılandırmamız bu kadar. Daha detaylı bir yapılandırma dosyası için <strong>[1]</strong> adresinden bilgi alabilirsiniz.</p>

<p>Artık yazımızın ikinci kısmına geçebiliriz. Bu işi yapacak birçok uygulama var. Ben arayüzü daha sıcak geldiği için LogAnalyzer kullanacağım. Öncelikle sitesinden uygulamayı indireceğiz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wget http://loganalyzer.adiscon.com/downloads/loganalyzer-3-6-2-v3-stable
</code></pre>
</div>

<p>Bu uygulama php ile web tarafında çalıştığından dolayı, php ve http sunucu paketlerinin sistemde kurulu olması gerekli.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>apt-get install php5 apache2
</code></pre>
</div>

<p>Sıkıştırılmış paketi açalım.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>tar xvfz loganalyzer-3.6.2.tar.gz
</code></pre>
</div>

<p>Bize gerekli olan dizin src dizinidir. Bunu web sunucunun “documentroot” dizinine taşıyacağız. Bu dizin Apache ayarlarınıza göre farklılık gösterebilmekte. Buraya dikkat ediniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mv loganalyzer-3.6.2/src/ /var/www/loganalyzer
</code></pre>
</div>

<p>Uygulamanın olduğu dizinde ayar dosyası bulunmamakta. Bunun için bir ayar dosyası oluşturup gerekli yazma iznini vermemiz gerekli.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>touch /var/www/loganalyzer/config.php
chmod 666 /var/www/loganalyzer/config.php
</code></pre>
</div>

<p>Artık kurulumlar tamamlandı. LogAnalyzer yapılandırmasını yapabiliriz. Bir web tarayıcı açalım
<a href="http://localhost/loganalyzer">http://localhost/loganalyzer</a></p>

<p>yazdığımızda karşımıza uyarı ekranı gelecek.</p>

<p><img src="images/post/syslog-ng/1.png" alt="" /></p>

<p>“here” yazan yere tıklayalım ve devam edelim.</p>

<p>“Next” diyerek geçiyoruz.</p>

<p><img src="images/post/syslog-ng/2.png" alt="" /></p>

<p>config.php dosyamız olmasa ya da yazma izni olmasaydı hata alacaktık. Şu an için hata almadığımızdan “Next” diyerek devam ediyoruz.</p>

<p><img src="images/post/syslog-ng/3.png" alt="" /></p>

<p>Eğer varsayılan ayarları kullanmak istiyorsak “Next” diyerek devam ediyoruz.</p>

<p><strong>Number of syslog messages per page:</strong> Her sayfada gösterilecek olan log mesajı sayısı.<br />
<strong>Message character limit for the main view:</strong> Mesaj için karakter limiti.<br />
<strong>Show message details popup:</strong> Kurulum bitince göreceğiniz gibi bir mesaj üzerine gelince popup olarak bilgi  geliyor. Bunun olmasını istemiyorsak buradan “No” seçili olacak.<br />
<strong>Automatically resolved IP Addresses (inline)</strong><br />
<strong>Enable User Database</strong>\</p>

<p><img src="images/post/syslog-ng/4.png" alt="" /></p>

<p>Name of the Source	istediğimiz gibi isim verebiliriz.
Source Type DiskFİle/MysqlNative/Database/MongoDB seçeneklerimiz var. Logları kaynak olarak nereden okuyacağının ayarını yapıyoruz. Ben disk text dosyalarından okutacağım için DiskFile seçtim.
LogLine syslog-ng kullandığımız için Syslog/Rsyslog seçtim</p>

<p><img src="images/post/syslog-ng/5.png" alt="" /></p>

<p>Ve kurulum tamamlandı</p>

<p><img src="images/post/syslog-ng/6.png" alt="" /></p>

<h6 id="kaynak">Kaynak:</h6>
<p>[1] <a href="http://www.balabit.com/sites/default/files/documents/syslog-ng-ose-3.3-guides/en/syslog-ng-ose-v3.3-guide-admin-en/html/syslog-ng.conf.5.html">http://www.balabit.com/sites/default/files/documents/syslog-ng-ose-3.3-guides/en/syslog-ng-ose-v3.3-guide-admin-en/html/syslog-ng.conf.5.html</a></p>

                        </div>
                        <div class="extra content ui labels grey basic tiny">
                            


    
    
    <a href="/etiket/sudo-56-sayi" class="ui label"> Sudo 56. Sayı </a>

    
    
    <a href="/etiket/kayit" class="ui label"> kayıt </a>

    
    
    <a href="/etiket/log" class="ui label"> log </a>

    
    
    <a href="/etiket/gunluk" class="ui label"> günlük </a>


                        </div>
                    </div>
                    <div class="ui segment">
                        <div id="disqus_thread"></div>
                        <script>
                            /**
                             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                             */
                            var disqus_config = function () {
                                this.page.identifier = '/syslog-ng';
                            };
                            (function() {  // DON'T EDIT BELOW THIS LINE
                                var d = document, s = d.createElement('script');

                                s.src = '//bugra9.disqus.com/embed.js';

                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                            })();
                        </script>
                    </div>
                </div>
                <div class="column five wide computer only">
                    <h3 class="ui header orange dividing">
                      Benzer Yazılar
                    </h3>
                    <div id="rp" class="ui items divided link">

                    </div>
                    <div id="toc" class="ui items divided link">

                    </div>

                </div>
            </div>
        </div>
        <footer>
    <nav>
        <div>
            <a href="https://ubuntu-tr.net/">Anasayfa</a>
            <a href="https://ubuntu-tr.net/bize-katilin/">Bize Katılın!</a>
            <a href="https://ubuntu-tr.net/iletisim/">İletişim</a>
            <a href="https://ubuntu-tr.net/indir/">İndir</a>
            <a href="https://ubuntu-tr.net/ubuntu-hakkinda/">Ubuntu Hakkında</a>
        </div>
        <div>
            <a href="https://forum.ubuntu-tr.net/">Forum</a>
            <a href="https://forum.ubuntu-tr.net/index.php?action=login">Giriş Yap</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=2.0">Duyurular</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=142.0">Acemiler için İlk Durak</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        </div>
        <div>
            <a href="https://sudo.ubuntu-tr.net/">SUDO</a>
            <a href="https://sudo.ubuntu-tr.net/hakkinda/">Hakkında</a>
            <a href="https://sudo.ubuntu-tr.net/sudo-tayfasi/">SUDO Tayfası</a>
            <a href="https://sudo.ubuntu-tr.net/yazar-ol/">Yazar Ol</a>
            <a href="https://sudo.ubuntu-tr.net/butun-sayilar/">Bütün Sayılar</a>
        </div>
        <div>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ana_Sayfa">Wiki</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ubuntu">Ubuntu Nedir?</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Kurulum">Kurulum</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Windows%27tan_Ubuntu%27ya_ge%C3%A7i%C5%9F">Windows’tan Ubuntu’ya Geçiş</a>
        </div>
        <div>
            <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
            <a href="http://gezegen.ubuntu-tr.net/basliklar">Tüm Başlıklar</a>
            <a href="http://gezegen.ubuntu-tr.net/kunye/">Künye</a>
            <a href="http://gezegen.ubuntu-tr.net/feed">RSS</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=17310.0">Gezegen’e Başvur</a>
        </div>
        <div>
            <a href="http://www.ubuntu.com/">Ubuntu</a>
            <a href="http://askubuntu.com/">AskUbuntu</a>
            <a href="http://ubuntuforums.org/">Ubuntu Forums</a>
            <a href="http://www.ubuntu.com/download">Download</a>
            <a href="https://launchpad.net/">Launchpad</a>
        </div>
    </nav>
    <div class="ayirac"></div>
    <div class="bilgi">
        <img src="theme/ubuntu-tr/images/GitHub-Mark-120px-plus.png" />
        <p>Ubuntu-TR Sudo <a href="https://github.com/ubuntu-tr/ubuntu-tr.github.io">Github</a> desteği ile barındırılmaktadır.</p>
        <p>Tasarım: <a href="https://ubuntu-tr.net/">Ubuntu Türkiye</a> • Alt yapı: <a href="https://jekyllrb.com/">Jekyll</a></p>
        <img src="theme/ubuntu-tr/images/cc-by-sa2.png" />
        <p>Bu sitedeki makaleler <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> lisansı altındadır.</p>
    </div>

</footer>


    </body>
</html>
