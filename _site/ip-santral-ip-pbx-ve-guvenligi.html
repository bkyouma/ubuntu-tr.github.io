

  





<!DOCTYPE html>
<html>
    <head>
        <title>IP Santral (IP PBX) ve Güvenliği</title>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="theme/ubuntu-tr/css/main.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/ubuntu-tr.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/semantic.min.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/github-markdown.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/highlight.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/flexslider.css">
<script src="theme/ubuntu-tr/js/jquery-2.2.0.min.js"></script>
<script src="theme/ubuntu-tr/js/ubuntu-tr.js"></script>
<script src="theme/ubuntu-tr/js/jquery.flexslider-min.js"></script>

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#dd4814">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#dd4814">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="icon" sizes="192x192" href="http://design.ubuntu.com/wp-content/uploads/ubuntu-logo32.png">

        <script src="theme/ubuntu-tr/js/relatedPosts.js"></script>
        <script src="theme/ubuntu-tr/js/jquery-ui.min.js"></script>
        <script src="theme/ubuntu-tr/js/tocify.js"></script>
        <link rel="stylesheet" href="theme/ubuntu-tr/css/tocify.css">
    </head>
    <body>
        <input type="checkbox" name="menuDugme" id="menuDugme1">
<header>
    <nav class="ustMenu">
        <a href="http://www.ubuntu-tr.net/">Anasayfa</a>
        <a href="https://forum.ubuntu-tr.net/">Forum</a>
        <a class="aktif" href="/">SUDO</a>
        <a href="http://wiki.ubuntu-tr.net/">Wiki</a>
        <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
        <a href="http://www.ubuntu-tr.net/iletisim/">İletişim</a>
        <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        <a href="http://www.ubuntu-tr.net/tur/14.04/tr/index.html">Ubuntu Çevrimiçi Tur</a>
        <a href="http://webchat.freenode.net/?channels=ubuntu-tr-sohbet">Sohbet Kanalı</a>
    </nav>
    <nav class="menu">
        <a class="logo" href="">
            <label for="menuDugme1">
               <img src="theme/ubuntu-tr/images/menu.png" class="menuIcon"/>
            </label>
            sudo
        </a>
        <a href="/">Ana Sayfa</a>
        
        
	<a href="/haberler/">Haberler</a>

	<a href="/uygulama-tanitimlari/">Tanıtım</a>

	<a href="/nasil-yapilir/">Nasıl?</a>

	<a href="/oyun-eglence/">Oyun / Eğlence</a>

	<a href="/ubuntu+1/">Ubuntu+1</a>


        <a></a>
    </nav>
</header>

        <div class="ui container">
        <br /><br />
            <div class="ui grid equal width stackable">
                <div class="column">
                    <div class="ui card fluid">
                        <div class="content">
                            <h1 class="ui header">IP Santral (IP PBX) ve Güvenliği</h1>
                            <div class="meta">
                                <span><b class="ui sub header orange">Yazar:</b> Deniz Özibrişim</span>
                                <span><b class="ui sub header orange">Kategori:</b> <a href="/uygulama-tanitimlari/">Tanıtım</a></span>
                                <span class="right floated">19 Nisan 2016 tarihinde yayımlandı.</span>
                            </div>
                            <div class="description">
                                
                            </div>
                        </div>
                        <div class="image">
                            <img src="images/post/ip-santral-ip-pbx-ve-guvenligi/kapak.png">
                        </div>
                        <div class="markdown-body">
                            <h2 id="giri">Giriş</h2>

<p>Bu ay inceleyeceğimiz konu daha çok kurumlara yönelik olacak. Özellikle son birkaç yılda hızla yaygınlaşmaya başlayan bu teknolojiyi incelerken beraberinde gelen güvenlik zorunluluğundan bahsedeceğiz. Neden zorunluluk derseniz, maliyet açısından çok mantıklı bir teknoloji olmasına rağmen, eğer güvenlik altına alınmaz ise saldırganlar yüzünden çok ciddi maddi zarara uğranılmasına neden olabilir, hatta bunun için saldırganları tahrik eden bir yapıya sahiptir.</p>

<p>IP Santral (IP PBX)’in kısaca ne olduğuna, neler yapabileceğine ve ne gibi tehlikelere açık olduğundan bahsedeceğiz ama bundan önce vurgulamak istediğim bir nokta var.</p>

<p>2008 yılının başında başladım IP Santraller ile ilgilenmeye. Uzun sayılmayan bu mazimizde değişik tecrübeler yaşadık; fakat ilk aldığım ders Linux çekirdeğini kullanan dağıtımların diğer işletim sistemlerine nazaran sesi çok daha iyi işlediğiydi. Farklı işletim sistemleri üzerinde yaptığımız denemeler başarısızlıkla sonuçlandı. Tabii bizim çalışmamız bir kıstas değildir, fakat başarılı olan bütün ürünler GNU/Linux dağıtımlarında çalışmaktadır.</p>

<p>Bu işi en iyi şekilde yerine getiren ve dünyanın dev firmalarının ücretli ürünleri ile rahatlıkla yarışabilen ‘Asterisk’ tabanlı IP Santraller.</p>

<p>“Nedir bu IP Santral? Normal santrallerden farkı neymiş bunun? Bizim zaten santralimiz var, ne yapalım biz IP Santral’i?”  gibi sorular yükseliyor, sesleri duyar gibiyim, merak etmeyin kısa kesip anlatmaya çalışacağım.</p>

<p>Yıllardır alışık olduğumuz PBX santrallerin başına IP (İnternet Protokolü) eklenmesi ile bir devrim gerçekleşti ve bu devrim, bize aşağıda okuyacağınız yenilikleri kazandırdı.</p>

<p>IP Santraller, bilgisayar tabanlı santrallerdir. Asterisk, GNU/Linux üzerinde çalışır, dolayısıyla bilgisayar üzerinde çalışan bir servisten ibarettir.</p>

<p>Önce alt yapı (zayıf akım) olarak olaya bakarsak, daha firma kurulurken bile ‘telefon kablosu’ çektirmenize gerek yoktur. yerel ağınız üzerinden çalıştığı için ayrı bir kablolama maliyeti çıkarmaz, bu durumda, şirkette bir odadan başka bir odaya taşınırken bile telefoncu çağırıp telefon hattınızı diğer odaya aktarmasını isteyip servis ücreti ödemezsiniz. Telefonunuzu fişinden ve ağ kablosundan çıkarıp, istediğiniz odaya geçip tekrar elektrik ve ağ kablosunu takmanız yeterlidir. IP Telefon açılırken sistemden IP alacak ve ağınızdaki IP Santral’i görüp dahili numarası ile kayıt olacaktır, kullanıma hazırdır bile.</p>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/5.jpg" alt="" /></p>

<p>Buradaki mantığa göre, IP telefonunuzun aldığı bir IP adresi var, İnternet tarayıcıya telefonunuzun IP adresini yazarak telefona bağlanıyorsunuz ve ayarlarını yapıyorsunuz. IP Telefonun IP Santral’e bağlanabilmesi için, IP Santral’inizin yerel ağınızdaki IP adresini telefon ayarlarına yazarak, telefonun IP Santral’e bağlanmasını sağlıyorsunuz.</p>

<h2 id="ya-d-ip-yazarsak">Ya dış IP yazarsak?</h2>

<p>Peki bir de olaya şu açıdan bakalım: İşten çıktım, eve gittim ve Adsl modemimden çıkan ağ kablosunu yanımda getirdiğim IP Telefon’a bağladım. Telefon modemden bir IP aldı, ama evimde IP Santral olmadığı için IP Telefon hiçbir santrale bağlanamadı, dolayısıyla çalışmıyor, arama yapmıyor. Tekrar telefonumun ayarlarına girmek için modemden aldığı IP adresini İnternet tarayıcımın adres çubuğuna yazıyorum ve ayarlar menüsüne ulaşıyorum, bu sefer IP Santral’in yerel IP adresini silip şirketin dış IP adresini yazıyorum ve kaydedip çıkıyorum. IP Telefon bu sefer açılırken dış IP adresinden santrale ulaşarak kayıt olmak istiyor ve eğer şirkette böyle bir yönlendirme var ise IP Telefon, IP Santral’e ulaşarak kayıt yapıyor ve kullanılabilir hâle geliyor.</p>

<p>Gördüğünüz gibi evimdeyim ama şirkette kullandığım telefonu eve getirip sanki şirketteymişim gibi kullanabiliyorum ve şirketteki bütün dahili telefonlarla aramdaki görüşmeler ücretsiz oluyor. Eğer dış arama yaparsam bu konuşma şirket hatları üzerinden çıkıyor.
Bunu uzak şubeli şirketler için düşünürsek, “devrim” derken ne demek istediğimi anlatmış olurum sanırım.</p>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/6.jpg" alt="" /></p>

<p>Uluslar arası şubesi olan firmalar için de aynı durum geçerlidir. Tek santral üzerinden bütün şubeleri yönetebilir ve şubeler arasındaki görüşmeler için %100 kazanç sağlayabilirsiniz.</p>

<p>Şu an’a kadar aslında sadece bir özelliğinden bahsetmiş olduk, başka bir açıdan bakarak aynı özelliğin kullanım alanını genişletmek açısından başımdan geçen bir olayı anlatmak istiyorum.</p>

<p>Yıllar önce (Bir önceki yazıda da “yıllar önce” örneğini verdim sanırım, beni yaşlı sanmayın, daha otuzumdayım. :) ) birçok firmaya Bilgi Teknolojileri adı altında danışmanlık ve destek veren bir firmada çalışıyordum. X firmasına IP Santral kurulumu yaptım ve gayet güzel çalışıyor, bir sorun yok. Fakat ilgi odağımız mermer ocakları olan firmalar olduğu için müşteriler ile sürekli diyalog hâlindeyim, çünkü her açtığı mermer ocağına teknoloji taşıyorum. Evet, bildiğiniz taşıyorum, tabi öyle sırtlayıp taşımıyorum adı üstünde teknoloji, ama kablosuz olarak taşıyorum. 1. tekil kişi ekine aldanmayın, bunlar ekip işi.</p>

<p>IP Santral’i kurduğumuz firma bizimle irtibata geçiyor ve beraber yeni ocaklarına gidiyoruz. Mermer ocağı taaa dağın başında, artık rakım kaç bin bilmiyorum; ama normal araç çıkamıyor, biz de iş makinesi ile çıktık. Firma açısından baktığınızda, şehirden kilometrelerce uzakta, yerden kilometrelerce yüksekte bir dağın tepesinde iş yapıyor. Tabii bırakın İnternet’i, telefonu yukarı su çıkarmak için kepçe kullanıyorlar.</p>

<p>Biz uygun bir yerden bize en yakın köyü (5-30, olmadı 50 km arası) gözümüze kestiriyoruz ve köye gidip dağı güzel gören ev, okul ya da camiden izin alıp oraya İnternet bağlatıyoruz, gelen İnternet’i kablosuz olarak dağa doğru yayınlıyoruz. Noktadan noktaya iki cihazla gerçekleşen bu bağlantıda sonuç olarak İnternet dağa ulaşmış oluyor. İnternet geldi mi her şey gelmiştir, deyip ucuna IP telefonu bağlıyoruz ve firma mutlu mesut çalışmaya devam ediyor. Artık ofisten oturduğu yerden mermer ocağını, o dağın başını arıyor ve ücretsiz görüşüyor. Tabii bu durumda dağda kalan personel de ücretsiz olarak şirketi arayabilir ya da istediği herhangi bir dış aramayı gerçekleştirebilir hâle geliyor. Bu bir nimet, çünkü o dağda cep telefonu neredeyse hiç çekmiyor.</p>

<p>Gördüğünüz gibi, IP Santralin sadece bir özelliğini kullanarak önce ofis içinde oda değiştirdik, sonra eve taşıdık, evde kullandık, son olarak dağlara çıktık, hâlâ IP Santral nimetlerinden faydalanıyoruz. Aynı mantıkla hava şartları vb. durum yüzünden işe gidemeyen çağrı merkezi personeli, işine evinden devam edebilir.</p>

<p>Diğer özellikleri ile devam edelim.</p>

<p>X Telekom şebekesi yerine istediğiniz kalitede, uygun ücretli bir firma ile anlaşıp çağrılarınızı o firma üzerinden çıkabilirsiniz.
Bodrum’da bazı dönemler yağmur çok olur ve telefon hatlarına yıldırım düşer. Sonuç üzücü, kablolardan gelen yüksek akım, hem Telekom’un santraline hem de kurumların santraline zarar verir. Bu yüzden çalıştığım firmada sadece giden çağrıları değil, gelen çağrıları da İnternet üzerinden alıyoruz. Santrale takılı hiçbir fiziksel hat yok. Yağmur da yağsa şimşek de çaksa artık bizi ilgilendirmiyor. Numara taşıma (sanal numara) konumuz olmadığı için değinmiyorum, ama kısaca bahsetmek gerekirse farklı firmalara numaranızı aynen taşıyorsunuz ve artık kablolara bağımlı kalmıyorsunuz, çağrılar İnternet üzerinden direkt santralinize geliyor; sabit ücret, hat meşgul derdi kalmıyor.</p>

<ul>
  <li>Arayan numarayı gösterme özelliği; operatör konsol ve tüm dahililer arayan numarayı görebilir.</li>
  <li>Otomatik çağrı dağıtıcı sayesinde eğer istenirse arayan numarayı tanır, belirli numaradan gelen çağrıları ilgili dahiliye otomatik yönlendirir.</li>
  <li>Masanızdan kalktınız gittiniz, isterseniz dahilinizi cep telefonunuza ya da başka bir yere yönlendirebilirsiniz.</li>
  <li>Aynı şekilde yerinizde yoksanız, arayanın mesaj bırakmasını sağlayabilir ve yerinize geldiğiniz zaman telefonun verdiği uyarı sayesinde mesaj olduğunu görüp dinleyebilirsiniz. Ofis dışından da dahilinize bırakılan mesajları dinleyebilirsiniz.</li>
  <li>Çağrı engelleme, telefonu ‘Rahatsız Etme (DND)’ moduna alarak gelen çağrıları engelleyebilirsiniz.</li>
  <li>Çağrı bekletme ile telefonun meşgul çalmasını engelleyebilirsiniz ve bir kişi ile konuşurken diğer arayan kişiyi hatta alana kadar bekletmeye alabilirsiniz. Sizin seçtiğiniz müziği (mp3 formatı dahil) dinletebilirsiniz.</li>
  <li>Arama planı, bu sayede çevirdiğiniz numaraya göre uygun tarifeli hat üzerinden çıkış yapmanızı sağlar.</li>
  <li>Sınırsız iç ve dış hat desteği, IP telefon var ise hiçbir ek maliyet gerekmeden istediğiniz kadar dahili abone oluşturabilirsiniz. (IP Telefon zorunlu değildir, analog telefon adaptörleri ile telsiz vb. eski telefonları kullanabilirsiniz. Fakat bu durum için maliyet çıkacaktır.)</li>
  <li>Sadece telefon değil, bilgisayar üzerinden kullanma, görüşme yapma imkânı sağlar. (SIP Protokolü kullanan birçok ücretsiz program mevcuttur.)</li>
  <li>Karşılama robotu; bu sayede çağrıları uzak noktalara da yönlendirebilirsiniz, “İzmir ofis için 2’ye Bodrum ofis için lütfen 3’e basın” gibi.</li>
  <li>Ses kayıt; analog santrallerde olduğu gibi ses kayıt için ek bir modüle gerek yoktur, bütün dahili ve harici görüşmeler kayıt altına alınabilir.</li>
  <li>SIP Protokolü (RFC 3261) kullanan diğer cihazlar, örneğin  Android, iOS, Symbian sistemli cep telefonları, santrale kayıt olup dahili masa telefonu gibi kullanılabilir. (Şahsen şirkette telsiz telefon taşımıyorum, cep telefonum santrale bağlı.)</li>
</ul>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/7.png" alt="" /></p>

<p>Aslında özellikler daha saymakla bitmeyecektir. Biraz hayal gücümüzle de sınırlı, arayan kişiyi direkt cebime yönlendirebiliyorsam daha şık olması için önce ses kayıt ile karşılarım: ‘Aradığınız kişi şu anda yerinde değil, cep telefonundan ulaşmak için 1’e basınız.” Bence bayağı havalı oldu. :)</p>

<h2 id="saldrganlarn-neden-lgisini-ekiyor">Saldırganların Neden İlgisini Çekiyor?</h2>

<p>Tabii ki birden fazla nedeni var. Bazılarını sıralamak gerekirse; firmaların telefon görüşme kayıtlarını dinlemek, bilgi hırsızlığı, maddi kazanç bunların içinde en cazip olanları. Özellikle maddi kazanç… Peki bu kazancı nasıl sağlıyorlar?</p>

<p>Özellikle dışarıya açık olan IP Santraller tehdit altında. “Dışarıya açık”ın ne olduğuna değinelim: Çok şubeli olan firmalar, santrallerine dışarıdan bağlanmak için kapılarını dış dünyaya açmak zorunda.
Bu açıktan içeri girip santrale ulaşan saldırgan, santralden yaptığı kendine kayıtlı yurt dışı numaralarını aratarak kazanç sağlıyor. Bir bakıyorsunuz bir dahili yurt dışını aramış ve uzun süre konuşmuş gözüküyor. Hâlbuki o numarayı ararsanız görüşebileceğiniz hiç kimse yok, aradığınızda karşı taraf otomatik hattı açıyor ve arandığı için kazanç sağlıyor. Bunu fatura gelene kadar fark etmediğinizi var sayarsak, saldırgan için kazanç, sizin için zarar büyük olacaktır.</p>

<h2 id="tehditler-ve-gvenlik">Tehditler ve Güvenlik</h2>

<p>Asterisk santraller GNU/Linux işletim sistemleri üzerinde çalıştığı için, normal bir bilgisayarın maruz kalacağı her türlü tehdide maruz kalır. Servis reddi saldırıları ile santrali çalışmaz hâle getirmek mümkündür; fakat bu konu bütün bilgisayar ağınızı etkileyen ve ilgilendiren bir konu olduğu için sadece IP Santral’i ilgilendiren tehditlere ve korunma yollarına değinilecektir.</p>

<p>Yine de konuya ufaktan değinmek gerektiği için tekrar hatırlatıyorum, santralinize yönelik yapılacak saldırı çeşitleri saymakla bitmeyecektir. O kadar ki direkt santralinize yapılmamış bir saldırıdan dahi santraliniz etkilenebilir.
Örnek olarak DOS (Denial Of Service) saldırıları “TCP SYN” paketleri ile hedef sistemin portlarına saldırır, bu yükü kaldıramayan bilgisayarlar kabaca veri taşması (Buffer Overflow) yüzünden bağlantı kabul edemeyecek duruma gelir. Zamanında ünlü olan 139. port olayı da bir DOS saldırısıdır, “Out Of Band” verileri gönderilir ve bunu tanımlayamayan sistem kilitlenir. Farklı protokoller ile gerçekleştirilen DOS saldırıları da mevcuttur ancak DOS saldırılarını engellemek çok da zor değildir. Gelen paketler kaynağından engellenebilir ancak DDOS (Distributed Denial Of Service) gerçekten tehlikelidir. Farklı olarak saldırı tek bir kaynaktan gelmez, bu yüzden hem tespiti hemde engellenmesi zordur. İki aşamalı gelişen sürecin ilk aşamasında DOS saldırısını yapacak kurban bilgisayarlar bulunur ki bunlar “Zombie” adı ile anılırlar, ikinci aşamada ise birinci aşamadaki kurbanlar kullanılarak hedef sisteme saldırı gerçekleştirilir. Zombie olarak bilinen sistemler sürekli dinleme modunda beklerler ve emir geldiği anda saldırıya geçerler. Buradaki gücü tahmin edebilirsiniz. On ile elli bilgisayar saldırdığı zaman bunları engellemek mümkün olsa bile bu sayı yüzleri binleri bulduğu zaman engelleseniz bile kaynaktan çıkan paketler bizim bant genişliğimizi doldurarak sistemi çalışmaz hâle getirecektir. Buradan konumuza bağlarsak IP Santralimiz de çalışmaz hâle gelecektir.</p>

<p>Gelelim IP Santralimize yönelik kazanç peşinde koşan saldırganlarımıza.
Sırası gelmişken belirtmek isterim, sizinle paylaştığım bu küçük deneyimlerim içinde çok yüksek fatura ödemek zorunda kalan, IP Santral’i sadece modeme takılı ve güvenlik önlemi almamış birçok kişi ile tanıştık. Lütfen benim başıma gelmez demeyin, zira “Konuşsa ne kadar konuşacak” dedikten sonra yüksek faturaları yüzünden santralin bütün İnternet bağlantısını kesen firmalar biliyorum ki zamanında uyarılarımızı yapmıştık.</p>

<ul>
  <li>
    <p>Bu tür durumlarda suçlu hep uyaran kişi/ler gibi görünür, hâlbuki kazın ayağı öyle değil, yönetim hep topu birbirine atar, aşçı uşağa, uşak aşçıya diye topu gezdirirken fatura hep uşağa patlar.</p>
  </li>
  <li>
    <p>Sadece IP Santrallere yönelik saldırı tipi çok değildir, en azından ben çok fazla bilmiyorum. DDOS da olduğu gibi saldırganın yöntemine kısaca değineceğiz, fakat kullandığı araçlardan bahsetmeyeceğiz.</p>
  </li>
</ul>

<p>En popüler yöntem, en büyük güvenlik açığı ile doğdu: “Deneme yanılma yöntemine izin veren istemler”. SIP protokolü genel olarak 5060 portu üzerinden haberleşir ve İnternet’e direkt çıkışı olan, önünde hiçbir güvenlik önlemi bulunmayan santral 5060 portundan gelen bütün istekleri cevaplar. Ekmeğine yağ sürdük zaten daha ne yapalım.
Öncelikli olarak santralimizin dış dünya ile bağlantısı olması gerekmiyorsa mutlaka İnternet ile olan bağlantısını keselim. Bu durumda zaten pek güvenlik ihtiyacı doğmayacak zira, geriye kalan sistemlerinizin güvenliği önemli olacaktır.
Çok şubeli, yani santrale başka ofislerden bağlanacak IP telefonlar, başka santraller, analog adaptör cihazları ve cep telefonu ile santrale bağlanması gereken kişi/ler için devam ediyoruz.
Şahsım adına konuşuyorum, eğer çok servisli sunucu üzerinde çalışmıyorsak ki IP Santral bunlardan biri değil, bütün istekleri engelleyip sadece gerekli yerlere izin verme taraftarıyım, zira benim için en güvenli yol budur ki az sonra bazı komutlar ile sistemimizi az ya da çok güven altına alacağız.</p>

<p>Bu güvenlik önlemlerini “Çizmedin ki kesesin” sözünü hatırlayarak, kurulu bir IP Santral üzerinde gerçekleştiriyoruz.</p>

<h2 id="brute-force-attack">Brute Force Attack</h2>
<p>Sanırım en çok uygulanan yöntem budur. Ben dört ayrı firmada logları incelerken “Brute Force Attack” yapıldığına şahit oldum. Bunun sebebi zaten bu yazının yazılma sebebidir. Bilinçsiz kurulum yapan firmalar ya da buna izin veren firmalar, bu tip saldırıların hedefi olurlar. Bu tip kurulumlar azımsanmayacak kadar fazla olduğu için bu saldırı, temeline çok uygundur.
Güvenlik işi böyledir, çok ince bir nokta, önemsiz gördüğünüz bir ayrıntı ile başlar her şey.
Önemsiz ya da ufak ayrıntı deyip geçmeyin, çünkü “Brute Force” saldırılarının bu kadar yoğun olmasının sebebi birçok kişinin aynı şekilde düşünmesidir.</p>

<p>Bu yöntemde saldırgan dışarıdan istek gönderebildiği IP Santral’e, kayıt olma (SIP Register) isteğini art arda gönderir. Bunun için yazılmış programlarda belirli dahili aralığı girilir. Örneğin; 100-1000
100 numaralı dahiliden kayıt isteği göndermeye başlar. Sürekli olarak Kayıt Adı ve Parola denemesi yapar. Bir dahiliden kayıt (Register) olduktan sonra, dahili için ekstra bir sınırlama yoksa (Custom Context) dilediği yeri arayabilecektir.</p>

<p>Başarılı bir saldırı sonucu zarar görmüş firmanın kayıtlarını (log) incelemek de sinir bozucu oluyor.</p>

<blockquote>
  <p>Kayıtlara /var/log/asterisk/full altından ulaşabilirsiniz.</p>
</blockquote>

<p>Kayıtlarda sürekli olarak denemeleri görüyorsunuz ve sonunda başardığını da. Bunun için farklı çözümler önerilir, belirli birkaç başarısız denemeden sonra kişiyi bloklama gibi. Fakat bu saldırı süreçlerinin oluştuğu yolu izlersek eğer, daha en baştan bizim sunucumuza çıkan yola sapmasını engellemek en başarılı çözüm olacaktır. Yola girdikten sonra birkaç deneme yapmasına izin verip sonra engellememizin bir anlamı yok, zira buradan komplike saldırılar doğabilir.</p>

<p>Hiçbir duvar/engel aşılamaz değildir, bu sebeple ilk yapmamız gereken, biz saldırganı bizim sunucumuza çıkan sokağa girmesine izin vermesek de bir şekilde başardığını varsayıp dahili şifrelerimizi karışık oluşturmalıyız. (Asla basit şifreler kullanmayın.)
Örneklemek gerekirse, dahilisi 120 olan birinin dahili şifresini 120 yaparsanız, saldırganın bunu kırması saniyeler sürecektir. Fakat “Sudo.43<em>” gibi bir şifreyi kırması saldırganı yaşlandıracaktır.
Yaşlansın tabi, benim sorunum değil diyorsanız “Sudo.43</em>uBuntu-tr” şifresi ile saldırganı bu yönden fazlasıyla saf dışı bırakmış olursunuz. Karışık şifreler her zaman için kırılması zor ve güvenliğinizi arttıran unsurlardır.</p>

<p>Güçlü şifrelerimizi oluşturduktan sonra sıra saldırganın bizim sokağa sapmasını önlemekte.
IP Santralimiz üzerinde kendi işinden başka servis barındırmadığı için çok kolay ve sade bir yolla güvenliği artıracağız.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>nano /sbin/guvenlik.sh
</code></pre>
</div>

<p>Dosya açıldıktan sonra dışarıdan bağlanacak IP adreslerine izin veren satırları ekleyip geri kalan istekleri geri çeviriyoruz. Aşağıdaki komutlar örnek olarak verilmiştir. İkinci satır yerel ağınızı temsil etmektedir, ona göre düzenleme yaparsınız.
Eğer ses hizmeti aldığınız bir firma varsa onun IP adresini ve dışarıdan bağlanması gereken uzak noktalarınızın IP adresini ekleyiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>İptables -F
iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT
iptables -A INPUT -s 208.67.222.222x -j ACCEPT
iptables -A INPUT -s 208.67.220.220 -j ACCEPT
iptables -A INPUT -s 8.8.8.8 -j ACCEPT
iptables -A INPUT -j REJECT
echo “Kurallar Aktif Edildi...”
</code></pre>
</div>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/1.png" alt="" /></p>

<p>Kaydedip çıkıyoruz, dosyaya çalıştırma yetkisi veriyoruz ve açılışta çalışmasını sağlıyoruz,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>chmod 755 /sbin/guvenlik.sh
echo “/sbin/guvenlik.sh” &gt;&gt; /etc/rc.local
</code></pre>
</div>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/2.png" alt="" /></p>

<p>rc.local’a yazıp yazmadığına bakmak isterseniz eğer,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat /etc/rc.local
</code></pre>
</div>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/3.png" alt="" /></p>

<p>Sunucuyu yeniden başlatmadan kuralları aktif etmek için,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/sbin/guvenlik.sh
</code></pre>
</div>

<p>Kurallar Aktif Edildi… çıktısını alıyoruz, kuralları görmek için,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -L
</code></pre>
</div>

<p><img src="images/post/ip-santral-ip-pbx-ve-guvenligi/4.png" alt="" /></p>

<p><strong>Kuş bakışı göz atalım:</strong></p>

<ol>
  <li>Eğer gerekli değilse IP Santral’i dışarıya hiç açmıyoruz ki bu durumda güvenliğini fazlasıyla sağlamış oluyoruz.</li>
  <li>Eğer uzak noktalar varsa, IP Santral dış Dünya’ya açıksa, mümkün mertebe güvenlik duvarının arkasında durmasına özen gösteriyoruz, elimizde bu imkân olsun ya da olmasın az önceki komutları uyguluyoruz.</li>
  <li>Basit şifreler kullanmıyoruz, kuvvetli şifrelerle saldırganın işini zorlaştırıyoruz.</li>
</ol>

<p>Tabii kesin konuşmamak lazım fakat yukarıdaki kurallarla ve güvenlik duvarının arkasında duran bir santrale saldırganın müdahale etmesi çok zor. Emin olun bu şartlar altında sizinle uğraşmaktan vazgeçecektir, hatta sizi bulamayacaktır, zira bu güvenlik tedbirlerini almamış bir dünya santral var.</p>

<blockquote>
  <p><strong>Not:</strong> iptables kurallarında REJECT yerine DROP kullanımı da mevcuttur. REJECT kullanımında karşı tarafa bilgi gönderir; fakat DROP kullanımında paket düşer, karşı tarafa bilgi dönüşü olmaz. DROP kullanımı da bir dizi güvenlik açığı oluşturabilir, mümkün mertebe REJECT kullanmaya çalışın.</p>
</blockquote>

<p>Konumuz iptables değil, fakat verdiğimiz komutları aydınlatma açısından kısaca değinmek istiyorum.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT
</code></pre>
</div>

<p>Yukarıdaki komutta,</p>

<div class="highlighter-rouge"><pre class="highlight"><code>-A parametresi kural girişi için kullanılır, yeni kural eklemek için.
INPUT bilgisayara gelen paketler için kural oluşturmamıza yarar.
-s (source) kaynak adresi belirtmek için kullanılır.
-j parametresi nasıl işlem uygulanacağını belirtir.
ACCEPT paketi kabul eder.
REJECT paketi engeller ve karşı tarafa engellediğini bildirir.
</code></pre>
</div>

<p>Bu komutta</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -A (yeni kural) INPUT (gelen) -s (kaynağından) 192.168.1.0./24 -j ACCEPT (kabul et)
</code></pre>
</div>

<p>Aşağıdaki kuralda gördüğünüz gibi ne gelirse reddet diyoruz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -A INPUT -j REJECT
</code></pre>
</div>

<p>Santral üzerinde birden fazla arayüz (interface) olabilir. IP Santral’i aynı zamanda ağ geçidi, güvenlik duvarı ve web filtresi olarak kullanabilirsiniz; fakat önerilen bir şey değildir. Herhangi bir sebepten birden fazla arayüz mevcut ise paketleri engellerken arayüz seçmeniz gerekebilir, bu durum için -i parametresini kullanıyoruz. ( -i interface),</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -A INPUT -j REJECT yerine, iptables -A INPUT -i eth0 -j REJECT
</code></pre>
</div>

<p>gibi, bu durumda eth0’dan gelen istekleri engelleyecektir.</p>

<p>Ya da eth0 üzerinden sadece yerel ağınızdan gelenleri kabul etmek isteyebilirsiniz:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>iptables -A INPUT -i eth0 -s ! 192.168.1.0/24 -j REJECT
</code></pre>
</div>

<p>Burada ek olarak “!” kullandık. Kaynak adresi 192.168.1.0/24 “olmayan” tüm paketleri engeller. Bu sayede yerel ağınız dışında gelen tüm istekler reddedilir.</p>

<p>Yeni teknolojileri sorunsuz ve güvenli bir şekilde kullanmanız dileğiyle, bir sonraki sayıda görüşmek üzere…</p>

                        </div>
                        <div class="extra content ui labels grey basic tiny">
                            


    
    
    <a href="/etiket/sudo-43-sayi" class="ui label"> Sudo 43. Sayı </a>

    
    
    <a href="/etiket/ip" class="ui label"> IP </a>

    
    
    <a href="/etiket/guvenlik" class="ui label"> güvenlik </a>

    
    
    <a href="/etiket/santral" class="ui label"> santral </a>

    
    
    <a href="/etiket/ip-pbx" class="ui label"> IP PBX </a>

    
    
    <a href="/etiket/asterisk" class="ui label"> asterisk </a>


                        </div>
                    </div>
                    <div class="ui segment">
                        <div id="disqus_thread"></div>
                        <script>
                            /**
                             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                             */
                            var disqus_config = function () {
                                this.page.identifier = '/ip-santral-ip-pbx-ve-guvenligi';
                            };
                            (function() {  // DON'T EDIT BELOW THIS LINE
                                var d = document, s = d.createElement('script');

                                s.src = '//bugra9.disqus.com/embed.js';

                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                            })();
                        </script>
                    </div>
                </div>
                <div class="column five wide computer only">
                    <h3 class="ui header orange dividing">
                      Benzer Yazılar
                    </h3>
                    <div id="rp" class="ui items divided link">

                    </div>
                    <div id="toc" class="ui items divided link">

                    </div>

                </div>
            </div>
        </div>
        <footer>
    <nav>
        <div>
            <a href="https://ubuntu-tr.net/">Anasayfa</a>
            <a href="https://ubuntu-tr.net/bize-katilin/">Bize Katılın!</a>
            <a href="https://ubuntu-tr.net/iletisim/">İletişim</a>
            <a href="https://ubuntu-tr.net/indir/">İndir</a>
            <a href="https://ubuntu-tr.net/ubuntu-hakkinda/">Ubuntu Hakkında</a>
        </div>
        <div>
            <a href="https://forum.ubuntu-tr.net/">Forum</a>
            <a href="https://forum.ubuntu-tr.net/index.php?action=login">Giriş Yap</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=2.0">Duyurular</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=142.0">Acemiler için İlk Durak</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        </div>
        <div>
            <a href="https://sudo.ubuntu-tr.net/">SUDO</a>
            <a href="https://sudo.ubuntu-tr.net/hakkinda/">Hakkında</a>
            <a href="https://sudo.ubuntu-tr.net/sudo-tayfasi/">SUDO Tayfası</a>
            <a href="https://sudo.ubuntu-tr.net/yazar-ol/">Yazar Ol</a>
            <a href="https://sudo.ubuntu-tr.net/butun-sayilar/">Bütün Sayılar</a>
        </div>
        <div>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ana_Sayfa">Wiki</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ubuntu">Ubuntu Nedir?</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Kurulum">Kurulum</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Windows%27tan_Ubuntu%27ya_ge%C3%A7i%C5%9F">Windows’tan Ubuntu’ya Geçiş</a>
        </div>
        <div>
            <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
            <a href="http://gezegen.ubuntu-tr.net/basliklar">Tüm Başlıklar</a>
            <a href="http://gezegen.ubuntu-tr.net/kunye/">Künye</a>
            <a href="http://gezegen.ubuntu-tr.net/feed">RSS</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=17310.0">Gezegen’e Başvur</a>
        </div>
        <div>
            <a href="http://www.ubuntu.com/">Ubuntu</a>
            <a href="http://askubuntu.com/">AskUbuntu</a>
            <a href="http://ubuntuforums.org/">Ubuntu Forums</a>
            <a href="http://www.ubuntu.com/download">Download</a>
            <a href="https://launchpad.net/">Launchpad</a>
        </div>
    </nav>
    <div class="ayirac"></div>
    <div class="bilgi">
        <img src="theme/ubuntu-tr/images/GitHub-Mark-120px-plus.png" />
        <p>Ubuntu-TR Sudo <a href="https://github.com/ubuntu-tr/ubuntu-tr.github.io">Github</a> desteği ile barındırılmaktadır.</p>
        <p>Tasarım: <a href="https://ubuntu-tr.net/">Ubuntu Türkiye</a> • Alt yapı: <a href="https://jekyllrb.com/">Jekyll</a></p>
        <img src="theme/ubuntu-tr/images/cc-by-sa2.png" />
        <p>Bu sitedeki makaleler <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> lisansı altındadır.</p>
    </div>

</footer>


    </body>
</html>
