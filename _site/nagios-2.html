

  





<!DOCTYPE html>
<html>
    <head>
        <title>Nagios Network Monitör Uygulaması -2</title>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="theme/ubuntu-tr/css/main.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/ubuntu-tr.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/semantic.min.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/github-markdown.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/highlight.css">
<link rel="stylesheet" href="theme/ubuntu-tr/css/flexslider.css">
<script src="theme/ubuntu-tr/js/jquery-2.2.0.min.js"></script>
<script src="theme/ubuntu-tr/js/ubuntu-tr.js"></script>
<script src="theme/ubuntu-tr/js/jquery.flexslider-min.js"></script>

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#dd4814">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#dd4814">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="icon" sizes="192x192" href="http://design.ubuntu.com/wp-content/uploads/ubuntu-logo32.png">

        <script src="theme/ubuntu-tr/js/relatedPosts.js"></script>
        <script src="theme/ubuntu-tr/js/jquery-ui.min.js"></script>
        <script src="theme/ubuntu-tr/js/tocify.js"></script>
        <link rel="stylesheet" href="theme/ubuntu-tr/css/tocify.css">
    </head>
    <body>
        <input type="checkbox" name="menuDugme" id="menuDugme1">
<header>
    <nav class="ustMenu">
        <a href="http://www.ubuntu-tr.net/">Anasayfa</a>
        <a href="https://forum.ubuntu-tr.net/">Forum</a>
        <a class="aktif" href="/">SUDO</a>
        <a href="http://wiki.ubuntu-tr.net/">Wiki</a>
        <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
        <a href="http://www.ubuntu-tr.net/iletisim/">İletişim</a>
        <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        <a href="http://www.ubuntu-tr.net/tur/14.04/tr/index.html">Ubuntu Çevrimiçi Tur</a>
        <a href="http://webchat.freenode.net/?channels=ubuntu-tr-sohbet">Sohbet Kanalı</a>
    </nav>
    <nav class="menu">
        <a class="logo" href="">
            <label for="menuDugme1">
               <img src="theme/ubuntu-tr/images/menu.png" class="menuIcon"/>
            </label>
            sudo
        </a>
        <a href="/">Ana Sayfa</a>
        
        
	<a href="/haberler/">Haberler</a>

	<a href="/uygulama-tanitimlari/">Tanıtım</a>

	<a href="/nasil-yapilir/">Nasıl?</a>

	<a href="/oyun-eglence/">Oyun / Eğlence</a>

	<a href="/ubuntu+1/">Ubuntu+1</a>


        <a></a>
    </nav>
</header>

        <div class="ui container">
        <br /><br />
            <div class="ui grid equal width stackable">
                <div class="column">
                    <div class="ui card fluid">
                        <div class="content">
                            <h1 class="ui header">Nagios Network Monitör Uygulaması -2</h1>
                            <div class="meta">
                                <span><b class="ui sub header orange">Yazar:</b> Erkan Esmer</span>
                                <span><b class="ui sub header orange">Kategori:</b> <a href="/nasil-yapilir/">Nasıl?</a></span>
                                <span class="right floated">19 Nisan 2016 tarihinde yayımlandı.</span>
                            </div>
                            <div class="description">
                                Merhaba geçen sayımızda başladığımız Nagios Monitoring Sistemi yazımıza 2. bölümüyle devam ediyoruz.
                            </div>
                        </div>
                        <div class="image">
                            <img src="images/post/nagios-2/1.jpg">
                        </div>
                        <div class="markdown-body">
                            <h2 id="monitoring-sistemleri">Monitoring Sistemleri</h2>

<p>Geçen sayıdaki yazımızda Nagios’u kurup çalışma mantığına bakmıştık. Bu sayımızda ise izlemek istediğimiz cihazları Nagios’a ekleyeceğiz. “Bunu yapmak için neler yapmak gerekir?” sorusuna cevaplar arayarak yazımızı sürdüreceğiz ve Nagios yazımız tamamlanmış olacak.</p>

<p>Geçen ay kurduğumuz Nagios uygulamamıza web arayüzünden aşağıdaki şekilde ulaşabiliriz.</p>

<p><a href="http://nagios-sunucu_ap-adresi/nagios/">http://nagios-sunucu_ap-adresi/nagios/</a></p>

<p><img src="images/post/nagios-2/Nagios-Arayuz-1.PNG" alt="" /></p>

<p>Şu an için Nagios sunucumuzda izlediğimiz herhangi bir sunucumuz yok. Bu yazımızda Windows ve Linux sunucularımızı Nagios’a ekleyip izleme başlatacağız.</p>

<h4 id="nagiosa-windows-sunucu-ekleme">Nagios’a Windows Sunucu Ekleme</h4>

<p>Nagios istenilen cihazda izleme yapabilmesi için karşı tarafta bir agent kurulmasını ister. Windows Sistemler için NsClient++ uygulamasını kurarak Nagios ile bağlantıyı sağlayacağız.</p>

<p>İlk önce aşağıdaki adresten terminal uygulamamızı indiriyoruz. Bu bağlantıda sisteminize uygun olan sürümü (32Bit-64Bit)seçebilirsiniz.</p>

<p><a href="http://sourceforge.net/projects/nscplus/files/nscplus/NSClient%2B%2B%200.4.1/">http://sourceforge.net/projects/nscplus/files/nscplus/NSClient%2B%2B%200.4.1/</a></p>

<p><img src="images/post/nagios-2/NsClient-setup-1.png" alt="" /></p>

<p>Kurulumda önemlli olan nokta yan gördüğümüz ekran. Burada Allowed Hosts alanına Nagios sunucumuzun IP adresini giriyoruz.</p>

<p>Böylece NsClient yüklü sunucu üzerinde Nagios sunucumuz izinli oluyor ve izleme yapabilir durumda olabiliyor.</p>

<p>Bu kurulumla izlenecek cihaz tarafında gereklilikleri yapmış olduk.
Şimdi Nagios tarafında ayarlara bakalım.
Nagios kurulumu ile beraber gelen .cfg dosyalarından windows.cfg dosyası, Windows sunucular için bize bir şablon dosya görevini görebilir. Bu dosyayı örnek alarak Windows sunucumuza uyarlayabiliriz.</p>

<p>Nagios sunucumuzda /etc/nagios/object klasörünün içine giriyoruz. Object klasörü içinde windows.cfg dosyasını bulup bir kopyasını çıkartabiliriz. Bu kopya dosyamızı Windows sunucumuz için kullanacağız. Kopyalamak için;</p>

<p>/etc/nagios/object klasörü içindeyken;</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cp windows.cfg windowsServer-1.cfg
</code></pre>
</div>

<p>Şimdi yeni dosyamız windowsServer-1.cfg dosyamızı editleyelim. Editleme için vim ya da nano’yu kulanabiliriz.</p>

<p>/etc/nagios/object klasörü içindeyken</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vim windowsServer-1.cfg veya nano windowsServer-1.cfg
</code></pre>
</div>

<p>Dosyayı açtığımızda 3 önemli tanımlama alanından oluştuğunu göreceğiz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Define_Host
Define_HostGroup
Define_Services
</code></pre>
</div>

<p>Define_Host alanında sunucumuzun erişim bilgilerini tanımlıyoruz. Aşağıda ekran görüntüsünü görmekteyiz.</p>

<p><img src="images/post/nagios-2/cfg-file-Host-1.png" alt="" /></p>

<p>İzleyeceğimiz Windows sunucumuzun host_name tanımını ve ip_adresi tanımı yaptık.</p>

<p>Ardından Host_Group alanında ise bu hostumuzu hangi grupta tutacağımızı belirtiyoruz.
Nagios arayüzünde izlediğimiz cihazları grup bazlı ayırabilir ve monitörleyebiliriz.</p>

<p>Önemli bir detay olarak belirtmekte fayda var. Bir Host_Group sadece bir .cfg dosyasında belirtilir. Birden fazla olması durumunda Nagios servisi başlatılırken hata alırız. Sonuç olarak Host_Group ‘u tanımlıyoruz ve bu gruba giren diğer cihazları da define_host tarafındaki use alanına tanımlıyoruz. Aşağıdaki çıktıda gördüğümüz gibi Host_Group tanımlamasını yaptık.</p>

<p><img src="images/post/nagios-2/cfg-file-HostGroup-2.png" alt="" /></p>

<p>Son olarak bu cihaz üzerinde kontrol edeceğimiz servislerin tanımları var.</p>

<p><img src="images/post/nagios-2/cfg-file-Service-3.png" alt="" /></p>

<p>Servisler kısmında kurulumla birlikte gelen .cfg dosyasında toplam 7 adet servis bulunmaktadır. 1 tanesi monitörlenen makineye kurulan uygulamanın versiyonunu kontrol eder. Diğerleri ise mesela ekranda gördüğümüz üzere Uptime süresi, Cpu kullanımı ve devamında  ram, disk kullanımını izleyen servisler vardır. Bunları kaldırabileceğimiz gibi eklemeler de yapabiliriz.</p>

<p>Monitörlenen makinenin .cfg dosyasında değineceğimiz temel başlıklar bu kadar. Böylece .cfg dosyasıyla işimiz tamamlanmış oldu. Şimdi Nagios’a bu cihazın .cfg dosyasını göstererek izleme işlemini başlatabiliriz.
Bunun için /etc/nagios klasöründeki nagios.cfg dosyasına aşağıdaki gibi bir girdi yapmamız gerekir.</p>

<p><img src="images/post/nagios-2/nagios-cfg.png" alt="" /></p>

<p>Böylece sunucumuza göre uyarladığımız .cfg dosyamızın yolunu Nagios’a da bildirmiş olduk. Artık Nagios ilgili sunucumuzu monitör edecektir. Arayüzde Host alanında görebiliriz.</p>

<h4 id="nagiosa-linux-sunucu-ekleme">Nagios’a Linux Sunucu Ekleme</h4>
<p>Linux sunucumuz için de aynı Windows sunucumuzda olduğu gibi Nagios bir agent uygulama istiyor. Linux sunucular için NRPE uygulamasını kullanacağız. Bu uygulama sayesinde Nagios sunucumuz üzerinde izleme yapabilecek.</p>

<p>Uygulamayı yüklemek için terminal penceresinden
<code class="highlighter-rouge">
yum install nagios-nrpe
</code>
komutunu vermemiz gerekiyor. *Bu komut Centos sistemler için geçerlidir. Debian için de
<code class="highlighter-rouge">
apt-get install nagios-nrpe
</code>
dememiz gerekiyor.</p>

<p>Bu arada rpmforge veya epel repolarının sistemimize yüklü olduğunu varsayıyoruz. Aksi hâlde kurulumla gelen repolarda bu uygulamayı bulamayız.</p>

<p>Kurulum tamamlandıktan sonra /etc/nagios klasörü altında nrpe.cfg dosyasını bulabiliriz. Bu dosyayı editleyip allowed_hosts alanının karşısına Nagios sunucumuzun ip adresini yazıyoruz.</p>

<p><img src="images/post/nagios-2/linux-cfg-nrpe-cfg-1.png" alt="" /></p>

<p>Ardından nrpe servisini yeniden başlatarak (/etc/init.d/nrpe restart) monitörlenecek sunucumuz tarafında işlemlerimizi tamamlıyoruz.</p>

<p>Şimdi Nagios tarafında yapacaklarımıza bakalım. Tıpkı Windows sunucumuz için yaptığımız gibi Linux sunucumuz için de bir .cfg dosyası oluşturacağız. Bunun için örnek dosya olarak /etc/nagios/object klasörü altındaki localhost.cfg dosyayı kullanacağız. Localhost.cfg dosyası Linux sunucular için şablon dosya olarak kullanılabilir. Bu dosyayı kendi sunucumuza göre uyarlayacağız.</p>

<p>Yine .cfg dosyasında Define_Host, Define_HostGroup, Define_Services alanlarını göreceğiz.</p>

<p>Define_Host alanına erişim bilgilerimizi HostGroup alanına Linux sunucumuzu ekleyeceğimiz grubu tanımlayacağız. Yine Windows sunucumuzda yaptığımız gibi hareket ediyoruz.</p>

<p>Aşağıdaki çıktıda da göreceğimiz gibi use alanına grubu, host_name alanına makine adını, alias alanına arayüzdeki görünecek adını ve address alanına da sunucumuzun IP adresini yazıyoruz.</p>

<p><img src="images/post/nagios-2/linux-cfg-HostDefine-2.png" alt="" /></p>

<p>Host_Group alanını tekrar olmaması açısından Windows sunucularla aynı olduğu için geçip Define_service alanından bir çıktıyı inceleyelim.</p>

<p><img src="images/post/nagios-2/linux-cfg-ServiceDefine-2.png" alt="" /></p>

<p>Total_Processes, Swap_Usage ve SSH servislerinin tanımını görmekteyiz. Bu tanımlar sayesinde arayüzde ilgili servisleri monitör edebileceğiz. İstediklerimizi kaldırabilir takip etmek istediğimiz servis için de tabii ki eklemeler yapabiliriz.</p>

<p>Son olarak Nagios tarafında /etc/nagios/nagios.cfg dosyasına Linux sunucumuz için uyarladığımız dosyamızı tanımlıyor ve Linux sunucumuz için de izlemeyi başlatıyoruz. Tabii değişikliklerin etkin olması için Nagios servisini tekrar başlatmamız gerekiyor. /etc/init.d/nagios restart</p>

<p><img src="images/post/nagios-2/Linux-Nagios-cfg.png" alt="" /></p>

<p>Tüm bu işlemlerden sonra <a href="http://nagios-sunucu_ap-adresi/nagios/">http://nagios-sunucu_ap-adresi/nagios/</a> şeklindeki bağlantımızı kullanarak Nagios arayüzüne ulaşabiliriz. İşte eklediğimiz sunucularımız da monitör edilmekte.</p>

<p><img src="images/post/nagios-2/Nagios-Arayuz-son.PNG" alt="" /></p>

<p>Nagios’ta temel olarak yaptığımız işlemlere değinip 2 çeşit sunucumuzu da ekledik.</p>

<p>Görüşmek üzere.</p>

                        </div>
                        <div class="extra content ui labels grey basic tiny">
                            


    
    
    <a href="/etiket/sudo-54-sayi" class="ui label"> Sudo 54. Sayı </a>

    
    
    <a href="/etiket/ag-izleme" class="ui label"> ağ izleme </a>


                        </div>
                    </div>
                    <div class="ui segment">
                        <div id="disqus_thread"></div>
                        <script>
                            /**
                             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                             */
                            var disqus_config = function () {
                                this.page.identifier = '/nagios-2';
                            };
                            (function() {  // DON'T EDIT BELOW THIS LINE
                                var d = document, s = d.createElement('script');

                                s.src = '//bugra9.disqus.com/embed.js';

                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                            })();
                        </script>
                    </div>
                </div>
                <div class="column five wide computer only">
                    <h3 class="ui header orange dividing">
                      Benzer Yazılar
                    </h3>
                    <div id="rp" class="ui items divided link">

                    </div>
                    <div id="toc" class="ui items divided link">

                    </div>

                </div>
            </div>
        </div>
        <footer>
    <nav>
        <div>
            <a href="https://ubuntu-tr.net/">Anasayfa</a>
            <a href="https://ubuntu-tr.net/bize-katilin/">Bize Katılın!</a>
            <a href="https://ubuntu-tr.net/iletisim/">İletişim</a>
            <a href="https://ubuntu-tr.net/indir/">İndir</a>
            <a href="https://ubuntu-tr.net/ubuntu-hakkinda/">Ubuntu Hakkında</a>
        </div>
        <div>
            <a href="https://forum.ubuntu-tr.net/">Forum</a>
            <a href="https://forum.ubuntu-tr.net/index.php?action=login">Giriş Yap</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=2.0">Duyurular</a>
            <a href="https://forum.ubuntu-tr.net/index.php?board=142.0">Acemiler için İlk Durak</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=12295.0">Türkiye Tayfası</a>
        </div>
        <div>
            <a href="https://sudo.ubuntu-tr.net/">SUDO</a>
            <a href="https://sudo.ubuntu-tr.net/hakkinda/">Hakkında</a>
            <a href="https://sudo.ubuntu-tr.net/sudo-tayfasi/">SUDO Tayfası</a>
            <a href="https://sudo.ubuntu-tr.net/yazar-ol/">Yazar Ol</a>
            <a href="https://sudo.ubuntu-tr.net/butun-sayilar/">Bütün Sayılar</a>
        </div>
        <div>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ana_Sayfa">Wiki</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Ubuntu">Ubuntu Nedir?</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Kurulum">Kurulum</a>
            <a href="http://wiki.ubuntu-tr.net/index.php?title=Windows%27tan_Ubuntu%27ya_ge%C3%A7i%C5%9F">Windows’tan Ubuntu’ya Geçiş</a>
        </div>
        <div>
            <a href="http://gezegen.ubuntu-tr.net/">Gezegen</a>
            <a href="http://gezegen.ubuntu-tr.net/basliklar">Tüm Başlıklar</a>
            <a href="http://gezegen.ubuntu-tr.net/kunye/">Künye</a>
            <a href="http://gezegen.ubuntu-tr.net/feed">RSS</a>
            <a href="https://forum.ubuntu-tr.net/index.php?topic=17310.0">Gezegen’e Başvur</a>
        </div>
        <div>
            <a href="http://www.ubuntu.com/">Ubuntu</a>
            <a href="http://askubuntu.com/">AskUbuntu</a>
            <a href="http://ubuntuforums.org/">Ubuntu Forums</a>
            <a href="http://www.ubuntu.com/download">Download</a>
            <a href="https://launchpad.net/">Launchpad</a>
        </div>
    </nav>
    <div class="ayirac"></div>
    <div class="bilgi">
        <img src="theme/ubuntu-tr/images/GitHub-Mark-120px-plus.png" />
        <p>Ubuntu-TR Sudo <a href="https://github.com/ubuntu-tr/ubuntu-tr.github.io">Github</a> desteği ile barındırılmaktadır.</p>
        <p>Tasarım: <a href="https://ubuntu-tr.net/">Ubuntu Türkiye</a> • Alt yapı: <a href="https://jekyllrb.com/">Jekyll</a></p>
        <img src="theme/ubuntu-tr/images/cc-by-sa2.png" />
        <p>Bu sitedeki makaleler <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> lisansı altındadır.</p>
    </div>

</footer>


    </body>
</html>
